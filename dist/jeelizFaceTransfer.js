 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACETRANSFERAPI=(function(){function aa(b){var c=new XMLHttpRequest;c.open("GET",a.sb+a.neuralNetworkPath,!0);c.withCredentials=!1;c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&0!==c.status||b(c.responseText)};c.send()}function da(){for(var b=a.ic,c=Array(b),e=0;e<b;++e)c[e]=0;return c}function ma(b,c,e){b=Math.min(Math.max((e-b)/(c-b),0),1);return b*b*(3-2*b)}function na(b,c,e){return Math.min(Math.max((e-b)/(c-b),0),1)}function qa(b,c,e,f){return Math.pow(Math.min(Math.max((f-b)/(c-b),0),1),e)}
function sa(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function ta(b,c){var e=c%8;return b[(c-e)/8]>>7-e&1}
function Aa(b){var c=JSON.parse(b);b=c.ne;var e=c.nf,f=c.n;var r="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var q=r.length;c=new Uint8Array(q);for(var u=0;u<q;++u)c[u]=r.charCodeAt(u);r=new Float32Array(f);q=new Float32Array(e);u=b+e+1;for(var p=0;p<f;++p){for(var d=u*p,x=0===ta(c,d)?1:-1,y=d+1,g=1,w=0,h=y+b-1;h>=y;--h)w+=g*ta(c,h),g*=2;y=w;d=d+1+b;g=q.length;w=0;for(h=d;h<d+g;++h)q[w]=ta(c,h),++w;for(g=d=0;g<e;++g)d+=q[g]*Math.pow(2,-g-1);r[p]=0===d&&0===
y?0:x*(1+d)*Math.pow(2,1+y-Math.pow(2,b-1))}return r}
var E=function(){function b(t,l,H){l=t.createShader(l);t.shaderSource(l,H);t.compileShader(l);return t.getShaderParameter(l,t.COMPILE_STATUS)?l:!1}function c(t,l,H){l=b(t,t.VERTEX_SHADER,l);H=b(t,t.FRAGMENT_SHADER,H);t===D&&u.push(l,H);var M=t.createProgram();t.attachShader(M,l);t.attachShader(M,H);t.linkProgram(M);return M}function e(t,l){void 0===l.ea&&(l.ea="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===l.ha&&(l.ha=
["a0"]);void 0===l.aa&&(l.aa=[2]);if(void 0===l.precision||"highp"===l.precision)l.precision=g;l.id=x++;void 0!==l.Md&&l.Md.forEach(function(M,X){l.b=l.b.replace(M,l.Aa[X])});l.qb=0;l.aa.forEach(function(M){l.qb+=4*M});l.V=c(t,l.ea,"precision "+l.precision+" float;\n"+l.b);l.j={};l.c.forEach(function(M){l.j[M]=t.getUniformLocation(l.V,M)});l.attributes={};l.ba=[];l.ha.forEach(function(M){var X=t.getAttribLocation(l.V,M);l.attributes[M]=X;l.ba.push(X)});if(l.f){t.useProgram(l.V);d=l;p=l.id;for(var H in l.f)t.uniform1i(l.j[H],
l.f[H])}l.Ya=!0}function f(t){Ba.Qd(N);p!==t.id&&(N.F(),p=t.id,d=t,D.useProgram(t.V),t.ba.forEach(function(l){0!==l&&D.enableVertexAttribArray(l)}))}function r(t,l,H){e(t,l,H);t.useProgram(l.V);t.enableVertexAttribArray(0);p=-1;return d=l}function q(){return{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1"],f:{u1:0}}}var u=[],p=-1,d=null,x=0,y=!1,g="highp",w=["u1"],h=["u0"],F={u1:0},J={u0:0},C={u1:0,u2:1},m={u3:0},v={s0:q(),s1:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
c:w,f:F,precision:"lowp"},s2:{b:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",c:["u1","u2"],f:C},s3:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",c:w,f:F},s4:{b:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",c:["u1","u2"],f:C},s5:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",
c:w,f:F},s6:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",c:w,f:F},s7:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",c:["u0","u4"],f:J},s8:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",c:["u0","u4"],f:J},s9:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
c:w,f:F},s10:{b:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",c:["u1","u5","u6"],f:{u1:0,u5:1}},s11:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",c:["u1","u7"],f:F},s12:{b:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
c:["u1","u8"],f:F},s13:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",c:h,f:J},s14:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",c:h,f:J},s15:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",c:h,f:J},s16:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",
c:h,f:J},s17:{b:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",c:["u0","u6","u9"],f:{u0:0,u6:1,u9:2}},s18:{b:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",c:h,f:J},s19:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",
c:h,f:J},s20:{b:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",c:["u0","u10","u11"],f:{u0:0,u10:1}},s21:{b:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
c:["u1","u12"],f:F},s22:{b:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",c:["u13","u14","u15"],f:{u14:0,u13:1,u15:2}},s23:{b:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",c:["u14","u13","u16"],f:{u14:0,u13:1}},s24:{b:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
c:"u13 u14 u16 u20 u17 u18 u19".split(" "),f:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6}},s25:{b:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",c:"u13 u14 u16 u22 u23 u24 u21".split(" "),f:{u14:0,
u13:1,u21:2}},s26:{b:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",c:["u13","u14"],f:{u14:0,u13:1}},s27:{b:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",c:["u1","u21","u25"],f:{u1:0,u21:1}},s28:{b:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
c:w,f:F,precision:"lowp"},s29:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",c:["u1","u26"],f:F,precision:"lowp"},s30:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
c:["u1","u26"],f:F,precision:"lowp"},s31:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
c:["u1","u2","u27"],f:C},s32:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",c:["u1","u2","u27"],f:C},s33:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
c:["u3","u7"],f:m},s34:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",c:["u3","u7"],f:m},s35:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
c:["u1"],f:F,precision:"lowp"},s36:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",c:["u7","u1"],f:F,precision:"lowp"},s37:{b:"uniform sampler2D u1,u28,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u28,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
c:["u1","u28","u29"],f:{u1:0,u28:1,u29:2}}},G={s38:{b:"uniform float u16,u30;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:["u16","u13","u14","u21","u30"],Aa:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{b:"uniform float u16,u30,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:"u16 u24 u13 u14 u21 u30".split(" "),Aa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},N={ua:function(){return y},i:function(){if(!y){g="highp";for(var t in v)e(D,v[t],t);E.set("s0");D.enableVertexAttribArray(0);y=!0}},Fc:function(t){t.forEach(function(l){N.vb(l)})},vb:function(t){v[t.id]=t;e(D,t,t.id)},Wb:function(t,l,H){l||(l=t);v[l]=Object.create(G[t]);v[l].rd=!0;G[t].Aa&&G[t].Aa.forEach(function(M,X){v[l].b=v[l].b.replace(new RegExp(M,"g"),H[X])});e(D,v[l],l)},set:function(t){f(v[t])},Ba:function(t){return r(t,
q(),"s40")},mb:function(t){return r(t,{b:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",c:[],precision:"highp"},"s41")},Zc:function(t){return"undefined"===typeof v[t]?!1:v[t].Ya},F:function(){-1!==p&&(p=-1,d.ba.forEach(function(t){0!==t&&D.disableVertexAttribArray(t)}))},ob:function(){var t=0;d.ba.forEach(function(l,H){H=d.aa[H];D.vertexAttribPointer(l,H,D.FLOAT,!1,d.qb,t);t+=4*H})},oe:function(){D.enableVertexAttribArray(0)},Ca:function(){N.Da(D)},Da:function(t){t.vertexAttribPointer(d.ba[0],2,t.FLOAT,
!1,8,0)},Re:function(t,l){D.uniform1i(d.j[t],l)},C:function(t,l){D.uniform1f(d.j[t],l)},ca:function(t,l,H){D.uniform2f(d.j[t],l,H)},Se:function(t,l){D.uniform2fv(d.j[t],l)},yc:function(t,l){D.uniform3fv(d.j[t],l)},Te:function(t,l,H,M){D.uniform3f(d.j[t],l,H,M)},Ue:function(t,l,H,M,X){D.uniform4f(d.j[t],l,H,M,X)},nb:function(t,l){D.uniform4fv(d.j[t],l)},Ve:function(t,l){D.uniformMatrix2fv(d.j[t],!1,l)},We:function(t,l){D.uniformMatrix3fv(d.j[t],!1,l)},Xe:function(t,l){D.uniformMatrix4fv(d.j[t],!1,
l)},I:function(t,l){N.set(t);l.forEach(function(H){switch(H.type){case "4f":D.uniform4fv(d.j[H.name],H.value);break;case "3f":D.uniform3fv(d.j[H.name],H.value);break;case "2f":D.uniform2fv(d.j[H.name],H.value);break;case "1f":D.uniform1f(d.j[H.name],H.value);break;case "1i":D.uniform1i(d.j[H.name],H.value);break;case "mat2":D.uniformMatrix2fv(d.j[H.name],!1,H.value);break;case "mat3":D.uniformMatrix3fv(d.j[H.name],!1,H.value);break;case "mat4":D.uniformMatrix4fv(d.j[H.name],!1,H.value)}})},ye:function(){return"lowp"},
h:function(){D.disableVertexAttribArray(0);N.F();for(var t in v){var l=v[t];l.Ya&&(l.Ya=!1,D.deleteProgram(l.V));l.rd&&delete v[t]}u.forEach(function(H){D.deleteShader(H)});u.splice(0);x=0;y=!1}};return N}(),D=null,Ka=function(){function b(g){console.log("ERROR in ContextFF: ",g);return!1}function c(g){function w(){Ca.h();F.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;var h=document.createElement("canvas");h.setAttribute("width",
1);h.setAttribute("height",1);var F=null;try{F=h.getContext("webgl2",g)}catch(J){return!1}if(!F)return!1;e(F);Ia.Gb(F);g=Ia.Oa(F);if(!g.O&&!g.P)return w(),!1;g=Ca.Bb(F,g);w();return g?!0:!1}function e(g){g.clearColor(0,0,0,0);g.disable(g.DEPTH_TEST);g.disable(g.BLEND);g.disable(g.DITHER);g.disable(g.STENCIL_TEST);g.disable(g.CULL_FACE);g.GENERATE_MIPMAP_HINT&&g.hint(g.GENERATE_MIPMAP_HINT,g.FASTEST);g.disable(g.SAMPLE_ALPHA_TO_COVERAGE);g.disable(g.SAMPLE_COVERAGE);g.depthFunc(g.LEQUAL);g.clearDepth(1)}
var f=null,r=null,q=null,u=null,p=!0,d=null,x=null,y={o:function(){return f.width},K:function(){return f.height},pa:function(){return f},qe:function(){return D},R:function(){return p},flush:function(){D.flush()},cd:function(){d||(d=new Uint8Array(f.width*f.height*4));D.readPixels(0,0,f.width,f.height,D.RGBA,D.UNSIGNED_BYTE,d);return d},se:function(){return f.toDataURL("image/jpeg")},te:function(){Ja.D();r||(r=document.createElement("canvas"),q=r.getContext("2d"));r.width=f.width;r.height=f.height;
for(var g=y.cd(),w=q.createImageData(r.width,r.height),h=r.width,F=r.height,J=w.data,C=0;C<F;++C)for(var m=F-C-1,v=0;v<h;++v){var G=4*(C*h+v),N=4*(m*h+v);J[G]=g[N];J[G+1]=g[N+1];J[G+2]=g[N+2];J[G+3]=g[N+3]}q.putImageData(w,0,0);return r.toDataURL("image/png")},re:function(g){!r&&g&&(r=document.createElement("canvas"),q=r.getContext("2d"));var w=g?r:document.createElement("canvas");w.width=f.width;w.height=f.height;(g?q:w.getContext("2d")).drawImage(f,0,0);return w},i:function(g){g.Fb&&!g.Eb?f=document.getElementById(g.Fb):
g.Eb&&(f=g.Eb);f||(f=document.createElement("canvas"));f.width=g&&void 0!==g.width?g.width:512;f.height=g&&void 0!==g.height?g.height:512;"undefined"===typeof g&&(g={});void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!1);void 0===g.ab&&(g.ab=!0);void 0===g.antialias&&(g.antialias=!1);if(!D){var w={antialias:g.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:g.premultipliedAlpha,stencil:!1,depth:g.ab};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(w.antialias=!1);var h=c(w);!h&&w.antialias&&(w.antialias=!1,h=c(w));h&&(D=f.getContext("webgl2",w));D?p=!0:((D=f.getContext("webgl",w))||(D=f.getContext("experimental-webgl",w)),p=!1)}if(!D)return b("WebGL1 and 2 are not enabled");(u=D.getExtension("WEBGL_lose_context"))&&g.kc&&(x=g.kc,f.addEventListener("webglcontextlost",x,!1));if(!Ia.i())return b("Not enough GL capabilities");e(D);E.i();L.i();return Ca.Bb(D,Ia.ad())?!0:b("Cannot filter float textures")},h:function(){D&&Ia.h();u&&x&&(f.removeEventListener("webglcontextlost",
x,!1),x=null);d=q=r=f=null}};return y}(),Ba=function(){function b(){null===c&&("undefined"!==typeof E?c=E:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;b();return{Qd:function(e){c!==e&&(c&&c.F(),c=e)},ua:function(){return c.ua()},Ca:function(){return c.Ca()},Da:function(e){return c.Da(e)},ob:function(){return c.ob()},F:function(){return c.F()},set:function(e){return c.set(e)},Ba:function(e){b();return c.Ba(e)},mb:function(e){b();return c.mb(e)},h:function(){return c.h()}}}(),R=function(){function b(k){D.bindTexture(D.TEXTURE_2D,
k)}function c(k){M[0]=k;k=X[0];var P=k>>16&32768,K=k>>12&2047,n=k>>23&255;return 103>n?P:142<n?P|31744|((255==n?0:1)&&k&8388607):113>n?(K|=2048,P|(K>>114-n)+(K>>113-n&1)):P=(P|n-112<<10|K>>1)+(K&1)}function e(k){var P=new Uint16Array(k.length);k.forEach(function(K,n){P[n]=c(K)});return P}function f(){if(null!==fa.Wa)return fa.Wa;var k=q(e([1,1,1,1]));return null===k?!0:fa.Wa=k}function r(){if(null!==fa.Xa)return fa.Xa;var k=q(new Uint8Array([255,255,255,255]));return null===k?!0:fa.Xa=k}function q(k){if(!Ba.ua()||
!J)return null;var P=null;try{var K=D.getError();if("FUCKING_BIG_ERROR"===K)return!1;P=I.instance({isFloat:!1,v:!0,array:k,width:1});K=D.getError();if(K!==D.NO_ERROR)return!1}catch(n){return!1}Ja.D();D.viewport(0,0,1,1);D.clearColor(0,0,0,0);D.clear(D.COLOR_BUFFER_BIT);Ba.set("s0");P.zb(0);L.g(!0,!0);k=new Uint8Array(4);D.readPixels(0,0,1,1,D.RGBA,D.UNSIGNED_BYTE,k);k=.9<k[0];P.remove();Ja.J();return k}var u=0,p=null,d=0,x=null,y=null,g=null,w=null,h=null,F=null,J=!1,C=[],m={isFloat:!1,isPot:!0,isLinear:!1,
isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,u:null,qd:!1,v:!1,U:null,wa:4,cb:0},v=!1,G=null,N=null,t=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=!1,H=!1,M=new Float32Array(1),X=new Int32Array(M.buffer),fa={Wa:null,Xa:null},I={i:function(){J||(h=[D.RGB,null,D.RGB,D.RGBA],F=[D.RGB,null,D.RGB,D.RGBA],p=[D.TEXTURE0,D.TEXTURE1,D.TEXTURE2,D.TEXTURE3,D.TEXTURE4,D.TEXTURE5,D.TEXTURE6,D.TEXTURE7],l="undefined"!==
typeof JEContext,H="undefined"!==typeof Ia,l&&JEContext.Ke()&&p.push(D.TEXTURE8,D.TEXTURE9),x=[-1,-1,-1,-1,-1,-1,-1,-1],w=[D.UNSIGNED_BYTE,D.FLOAT,D.FLOAT],J=!0)},od:function(){if(!y){for(var k=new Float32Array(16384),P=0;16384>P;++P)k[P]=2*Math.random()-1;y={random:I.instance({isFloat:!0,isPot:!0,array:k,width:64}),Cc:I.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}I.$d()},De:function(){return y.Cc},$d:function(){w[1]=Ia.Ta(D)},Od:function(){F=h=[D.RGBA,D.RGBA,D.RGBA,D.RGBA]},
Gd:function(k,P){E.set("s1");Ja.D();var K=k.o(),n=k.K();D.viewport(0,0,K,n);k.a(0);L.g(!1,!1);D.readPixels(0,0,K,n,D.RGBA,D.UNSIGNED_BYTE,P)},Nb:function(k,P,K,n,Z,ha,ba){k.activeTexture(k.TEXTURE0);var U=k.createTexture();k.bindTexture(k.TEXTURE_2D,U);Z=Z instanceof Float32Array?Z:new Float32Array(Z);0!==Math.log2(Z.length)%1&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE));k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,
k.NEAREST);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,ha);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,K,n,0,k.RGBA,k.FLOAT,Z);k.bindTexture(k.TEXTURE_2D,null);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);ba&&(Ja.J(),E.set("s0"));k.viewport(0,0,K,n);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,P,0);k.bindTexture(k.TEXTURE_2D,U);ba?L.g(!0,!0):L.na(k);k.deleteTexture(U);J&&(x[0]=-1,g=null,u=0)},instance:function(k){function P(z){var T=
D.getError();if("FUCKING_BIG_ERROR"===T)return!1;D.texImage2D(D.TEXTURE_2D,0,ia,ea,ja,z);T=D.getError();T!==D.NO_ERROR&&ea!==D.RGBA&&(ea=D.RGBA,D.texImage2D(D.TEXTURE_2D,0,ia,ea,ja,z));return!0}function K(){if(!Qa){b(B);oa&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,oa);n.isPot?(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,n.isMirrorX?D.MIRRORED_REPEAT:D.REPEAT),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,n.isMirrorY?D.MIRRORED_REPEAT:D.REPEAT)):(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,D.CLAMP_TO_EDGE),
D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,D.CLAMP_TO_EDGE));n.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&D.texParameterf(D.TEXTURE_2D,JEContext.ve().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.be);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,n.isLinear?D.LINEAR:D.NEAREST);n.isLinear?D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,n.isMipmap&&!ua?D.NEAREST_MIPMAP_LINEAR:D.LINEAR):D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,n.isMipmap&&!ua?D.NEAREST_MIPMAP_NEAREST:D.NEAREST);
ea=h[n.wa-1];ia=F[n.wa-1];ja=w[ha];if(Ia.R()){var z=D.RGBA32F;ea===D.RGBA&&ja===D.FLOAT?n.isMipmap||n.isLinear?ia=Ca.dd(D):Ia.Cb()?z&&(ia=z):ia=D.RGBA16F||D.RGBA:ea===D.RGB&&ja===D.FLOAT&&z&&(ia=z,ea=D.RGBA)}if(n.v&&!n.isFloat||n.isFloat&&n.isMipmap&&Ca.ud())(z=D.RGBA16F)&&(ia=z),ja=Ia.Ta(D);n.cb&&(Da=n.cb);n.isSrgb&&4===n.wa&&(ea=JEContext.Be());if(n.u)P(n.u);else if(n.url)P(O);else if(ca){z=ca;try{"FUCKING_BIG_ERROR"!==D.getError()&&(D.texImage2D(D.TEXTURE_2D,0,ia,Q,S,0,ea,ja,z),D.getError()!==
D.NO_ERROR&&(D.texImage2D(D.TEXTURE_2D,0,ia,Q,S,0,ea,ja,null),D.getError()!==D.NO_ERROR&&D.texImage2D(D.TEXTURE_2D,0,D.RGBA,Q,S,0,D.RGBA,D.UNSIGNED_BYTE,null)))}catch(ub){D.texImage2D(D.TEXTURE_2D,0,ia,Q,S,0,ea,ja,null)}n.isKeepArray||(ca=null)}else z=D.getError(),"FUCKING_BIG_ERROR"!==z&&(D.texImage2D(D.TEXTURE_2D,0,ia,Q,S,0,ea,ja,null),z=D.getError(),z!==D.NO_ERROR&&(ea=D.RGBA,n.v&&ja!==D.FLOAT&&(ja=D.FLOAT,D.texImage2D(D.TEXTURE_2D,0,ia,Q,S,0,ea,ja,null))));if(n.isMipmap)if(!ua&&Y)Y.Sa(),Ea=!0;
else if(ua){z=Math.log2(Math.min(Q,S));ya=Array(1+z);ya[0]=B;for(var T=1;T<=z;++T){var ka=Math.pow(2,T),W=Q/ka;ka=S/ka;var va=D.createTexture();b(va);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.NEAREST);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.NEAREST);D.texImage2D(D.TEXTURE_2D,0,ia,W,ka,0,ea,ja,null);b(null);ya[T]=va}Ea=!0}b(null);x[u]=-1;oa&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!1);Fa=!0;n.U&&Y&&(n.U(Y),n.U=null)}}var n=Object.assign({},m,k),Z=d++;null===n.isFlipY&&(n.isFlipY=
n.url||n.array?!0:!1);n.data&&(n.array="string"===typeof n.data?Aa(n.data):n.isFloat?new Float32Array(n.data):new Uint8Array(n.data),n.isFlipY=!1);var ha=0,ba=n.u?!0:!1,U=null,wa=null,la=!1,A=null;n.v=n.v||n.isFloat;n.v&&(ha=1);n.qd||Ia.R()||!n.isFloat||!H||Ia.Cb()||(n.isFloat=!1);n.isFloat&&(ha=2);n.isAnisotropicFiltering&&l&&!JEContext.Fe()&&(n.isAnisotropicFiltering=!1);var B=D.createTexture(),O=null,ca=!1,Q=0,S=0,Fa=!1,Qa=!1,Ga=!1,pa=null,ra=null,La=null,za=null,ia=null,ea=null,ja=null,oa=n.isFlipY,
db=(k=n.v&&n.isMipmap)&&Ca.Oc(),ua=k&&db?!0:!1,ya=null,Da=-1,Ea=!1,xa={ac:!1,Ab:null,Ob:null};n.width&&(Q=n.width,S=n.height?n.height:Q);var Y={get:function(){return B},o:function(){return Q},K:function(){return S},Ee:function(){return n.url},Ge:function(){return n.isFloat},Ie:function(){return n.v},Je:function(){return n.isLinear},Sa:function(){D.generateMipmap(D.TEXTURE_2D)},Mc:function(z,T){ua?(z||(z=Y.Rb()),Y.Ma(T),b(ya[z]),x[T]=-1):Y.a(T)},Rb:function(){-1===Da&&(Da=Math.log(Q)/Math.log(2));
return Da},$c:function(z){if(ua){z||(z=Y.Rb());E.set("s11");Y.Ma(0);for(var T=Q,ka=S,W=1;W<=z;++W)T/=2,ka/=2,E.ca("u7",.25/T,.25/ka),D.viewport(0,0,T,ka),b(ya[W-1]),D.framebufferTexture2D(Ja.ra(),D.COLOR_ATTACHMENT0,D.TEXTURE_2D,ya[W],0),L.g(!1,1===W);x[0]=-1}else Y.Sa()},Ma:function(z){z!==u&&(D.activeTexture(p[z]),u=z)},a:function(z){if(!Fa)return!1;Y.Ma(z);if(x[z]===Z)return!1;b(B);x[z]=Z;return!0},zb:function(z){D.activeTexture(p[z]);u=z;b(B);x[z]=Z},l:function(){g=Y;D.framebufferTexture2D(Ja.ra(),
D.COLOR_ATTACHMENT0,D.TEXTURE_2D,B,0)},H:function(){g=Y;D.viewport(0,0,Q,S);D.framebufferTexture2D(Ja.ra(),D.COLOR_ATTACHMENT0,D.TEXTURE_2D,B,0)},pb:I.pb,resize:function(z,T){Q=z;S=T;K()},clone:function(z){z=I.instance({width:Q,height:S,v:n.v,isFloat:n.isFloat,isLinear:n.isLinear,isMirrorY:n.isMirrorY,isFlipY:z?!oa:oa,isPot:n.isPot});Ba.set("s0");Ja.J();z.l();D.viewport(0,0,Q,S);Y.a(0);L.g(!0,!0);return z},Rd:function(){D.viewport(0,0,Q,S)},remove:function(){D.deleteTexture(B);Qa=!0;C.splice(C.indexOf(Y),
1);Y=null},refresh:function(){Y.zb(0);oa&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!0);ba?D.texImage2D(D.TEXTURE_2D,0,ia,ea,D.UNSIGNED_BYTE,n.u):D.texImage2D(D.TEXTURE_2D,0,ia,Q,S,0,ea,ja,ca);oa&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!1)},Db:function(){var z=Q*S*4;ra=[new Uint8Array(z),new Uint8Array(z),new Uint8Array(z),new Uint8Array(z)];pa=[new Float32Array(ra[0].buffer),new Float32Array(ra[1].buffer),new Float32Array(ra[2].buffer),new Float32Array(ra[3].buffer)];La=new Uint8Array(4*z);za=new Float32Array(La.buffer);
Ga=!0},lb:function(){Ga||Y.Db();D.readPixels(0,0,Q,4*S,D.RGBA,D.UNSIGNED_BYTE,La);for(var z=Q*S,T=2*z,ka=3*z,W=0;W<z;++W)pa[0][W]=za[W],pa[1][W]=za[W+z],pa[2][W]=za[W+T],pa[3][W]=za[W+ka];return pa},Fd:function(){xa.ac||(xa.Ab=new Uint8Array(Q*S*4),xa.Ob=new Float32Array(xa.buffer),xa.ac=!0);D.readPixels(0,0,Q,S,D.RGBA,D.UNSIGNED_BYTE,xa.Ab);return xa.Ob},Pa:function(z){Ja.D();E.set("s12");Y.a(0);if(z)D.viewport(0,0,Q,S),E.nb("u8",.25,.25,.25,.25),L.g(!1,!0);else for(z=0;4>z;++z)D.viewport(0,S*z,
Q,S),E.nb("u8",t[z]),L.g(!1,0===z)},$e:function(z){var T=ja===w[0]&&!r();b(B);oa&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!0);T?(la||(U=document.createElement("canvas"),U.width=Q,U.height=S,wa=U.getContext("2d"),A=wa.createImageData(Q,S),la=!0),A.data.set(z),wa.putImageData(A,0,0),D.texImage2D(D.TEXTURE_2D,0,ia,ea,ja,U)):D.texImage2D(D.TEXTURE_2D,0,ia,Q,S,0,ea,ja,z);x[u]=Z;oa&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!1)},af:function(z,T){b(B);T&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!0);D.texImage2D(D.TEXTURE_2D,
0,ia,ea,ja,z);x[u]=Z;T&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!1)},Oe:function(z,T){var ka=Q*S,W=4*ka;z=n.v?z?"RGBE":"JSON":"RGBA";T&&(z=T);T=Ia.R()&&!1;var va=null;switch(z){case "RGBE":va="s42";break;case "JSON":va=T?"s0":"s12";break;case "RGBA":case "RGBAARRAY":va="s6"}Ga||("RGBA"===z||"RGBE"===z||"RGBAARRAY"===z?(ra=new Uint8Array(W),Ga=!0):"JSON"!==z||T||Y.Db());Ja.D();E.set(va);Y.a(0);W=null;if("RGBA"===z||"RGBE"===z||"RGBAARRAY"===z){D.viewport(0,0,Q,S);L.g(!0,!0);D.readPixels(0,0,Q,S,D.RGBA,
D.UNSIGNED_BYTE,ra);if("RGBAARRAY"===z)return{data:ra};v||(G=document.createElement("canvas"),N=G.getContext("2d"),v=!0);G.width=Q;G.height=S;ka=N.createImageData(Q,S);ka.data.set(ra);N.putImageData(ka,0,0);W=G.toDataURL("image/png")}else if("JSON"===z)if(T)W=new Float32Array(ka),D.viewport(0,0,Q,S),L.g(!0,!0),D.readPixels(0,0,Q,S,D.RGBA,D.FLOAT,W);else{for(W=0;4>W;++W)D.viewport(0,S*W,Q,S),E.nb("u8",t[W]),L.g(!W,!W);Y.lb();W=Array(ka);for(T=0;T<ka;++T)W[4*T]=pa[0][T],W[4*T+1]=pa[1][T],W[4*T+2]=pa[2][T],
W[4*T+3]=pa[3][T]}return{format:z,data:W,width:Q,height:S,isMirrorY:n.isMirrorY,isFlipY:"RGBA"===z?n.isFlipY:!n.isFlipY}}};n.isMipmap&&!ua&&Fa&&!Ea&&(Y.Sa(),Ea=!0);if(n.url)b(B),D.texImage2D(D.TEXTURE_2D,0,D.RGBA,1,1,0,D.RGBA,D.UNSIGNED_BYTE,null),O=new Image,O.ke="Anonymous",O.crossOrigin="Anonymous",O.src=n.url,O.onload=function(){Q=O.width;S=O.height;K()};else if(n.u){var Ra=function(){Q=void 0!==n.u.videoWidth?n.u.videoWidth:n.u.width;S=void 0!==n.u.videoHeight?n.u.videoHeight:n.u.height;Q?K():
setTimeout(Ra,1)};Ra()}else n.array?(n.v&&!n.isFloat?n.array instanceof Uint16Array?(ca=n.array,K()):f()?(ca=e(n.array),K()):(K(),I.Nb(D,B,Y.o(),Y.K(),n.array,oa,!0)):(ca=n.isFloat?n.array instanceof Float32Array?n.array:new Float32Array(n.array):n.array instanceof Uint8Array?n.array:new Uint8Array(n.array),K()),n.isKeepArray||(ca&&ca!==n.array&&(ca=null),delete n.array)):K();Y.Ae=Y.o;n.U&&Fa&&(n.U(Y),n.U=null);C.push(Y);return Y},D:function(k){k!==u&&(D.activeTexture(p[k]),u=k);x[k]=-1;b(null)},
ee:function(k){y.random.a(k)},pb:function(){g=null;D.framebufferTexture2D(Ja.ra(),D.COLOR_ATTACHMENT0,D.TEXTURE_2D,null,0)},reset:function(){for(var k=0;k<p.length;++k)x[k]=-1;u=-1},Ne:function(){u=-1},Xd:function(){for(var k=0;k<p.length;++k)I.D(k)},Pb:function(){y&&(y.random.remove(),y.Cc.remove())},Ye:function(k,P){if("RGBA"===k.format||"RGBE"===k.format){var K=new Image;K.src=k.data;K.onload=function(){I.instance({isMirrorY:k.isMirrorY,isFlipY:k.isFlipY,isFloat:!1,u:K,U:function(n){if("RGBA"===
k.format)P(n);else{var Z=k.width,ha=k.height,ba=I.instance({isMirrorY:k.isMirrorY,isFloat:!0,width:Z,height:ha,isFlipY:k.isFlipY});Ja.J();D.viewport(0,0,Z,ha);E.set("s43");ba.l();n.a(0);L.g(!0,!0);I.D(0);P(ba);D.flush();setTimeout(n.remove,50)}}})}}else"JSON"===k.format?P(I.instance({isFloat:!0,isFlipY:k.isFlipY,width:k.width,height:k.height,array:new Float32Array(k.data)})):P(!1)},h:function(){g&&(Ja.J(),I.pb(),Ja.D());I.Xd();C.slice(0).forEach(function(k){k.remove()});C.splice(0);J=!1;d=0;"undefined"!==
typeof Ca&&Ca.h()}};return I}(),Ma={instance:function(b){var c=[R.instance(b),R.instance(b)],e=[c[1],c[0]],f=e,r={xc:function(q){f[1].l();f[0].a(q);r.Bc()},Qe:function(q){f[1].H();f[0].a(q);r.Bc()},Bc:function(){f=f===c?e:c},refresh:function(){f[0].refresh();f[1].refresh()},a:function(q){f[0].a(q)},de:function(q){f[1].a(q)},gd:function(){return f[0]},remove:function(){f[0].remove();f[1].remove();f=null}};return r}},L=function(){function b(d){var x={N:null,s:null};x.N=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,
x.N);d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),d.STATIC_DRAW);x.s=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,x.s);d.bufferData(d.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),d.STATIC_DRAW);return x}var c=null,e=0,f=!1,r=[],q=-2,u=-2,p={reset:function(){u=q=-2},i:function(){f||(c=b(D),p.Na(),f=!0)},instance:function(d){var x=e++,y=d.s?d.s.length:0,g="undefined"===typeof d.mode?D.STATIC_DRAW:d.mode,w=D.createBuffer();D.bindBuffer(D.ARRAY_BUFFER,w);D.bufferData(D.ARRAY_BUFFER,
d.N instanceof Float32Array?d.N:new Float32Array(d.N),g);q=x;var h=null,F=null,J=null;if(d.s){h=D.createBuffer();D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,h);var C=null;65536>d.s.length?(C=Uint16Array,F=D.UNSIGNED_SHORT,J=2):(C=Uint32Array,F=D.UNSIGNED_INT,J=4);C=d.s instanceof C?d.s:new C(d.s);D.bufferData(D.ELEMENT_ARRAY_BUFFER,C,g);u=x}var m={Nc:function(v){q!==x&&(D.bindBuffer(D.ARRAY_BUFFER,w),q=x);v&&Ba.ob()},Kc:function(){u!==x&&(D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,h),u=x)},bind:function(v){m.Nc(v);
m.Kc()},le:function(){D.drawElements(D.TRIANGLES,y,F,0)},me:function(v,G){D.drawElements(D.TRIANGLES,v,F,G*J)},remove:function(){D.deleteBuffer(w);d.s&&D.deleteBuffer(h);m=null}};r.push(m);return m},Na:function(){-1!==q&&(D.bindBuffer(D.ARRAY_BUFFER,c.N),q=-1);-1!==u&&(D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,c.s),u=-1)},g:function(d,x){d&&L.Na();x&&Ba.Ca();D.drawElements(D.TRIANGLES,3,D.UNSIGNED_SHORT,0)},na:function(d){d=d||D;var x=b(d);d.bindBuffer(d.ARRAY_BUFFER,x.N);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,
x.s);Ba.Da(d);d.drawElements(d.TRIANGLES,3,d.UNSIGNED_SHORT,0);d.deleteBuffer(x.N);d.deleteBuffer(x.s);p.reset();f&&(p.Na(),Ba.Ca())},Pb:function(){var d=D,x=c;d.deleteBuffer(x.N);d.deleteBuffer(x.s)},h:function(){p.Pb();r.forEach(function(d){d.remove()});D.bindBuffer(D.ARRAY_BUFFER,null);D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,null);p.reset();f=!1;r.splice(0);e=0}};return p}(),Ja=function(){var b=null,c=null,e=null,f=!1,r=[],q={m:-2,Mb:1},u={ua:function(){return f},i:function(){if(!f){b=D.createFramebuffer();
var p=Ia.R();c=p&&D.DRAW_FRAMEBUFFER?D.DRAW_FRAMEBUFFER:D.FRAMEBUFFER;e=p&&D.READ_FRAMEBUFFER?D.READ_FRAMEBUFFER:D.FRAMEBUFFER;f=!0}},we:function(){return c},ed:function(){return e},ra:function(){return D.FRAMEBUFFER},ze:function(){return q},pe:function(){return b},instance:function(p){void 0===p.$b&&(p.$b=!1);var d=p.da?p.da:null,x=p.width,y=void 0!==p.height?p.height:p.width,g=b,w=null,h=!1,F=!1,J=0;d&&(x=x?x:d.o(),y=y?y:d.K());var C={wc:function(){h||(g=D.createFramebuffer(),h=!0,J=q.Mb++)},Ec:function(){C.wc();
C.l();w=D.createRenderbuffer();D.bindRenderbuffer(D.RENDERBUFFER,w);D.renderbufferStorage(D.RENDERBUFFER,D.DEPTH_COMPONENT16,x,y);D.framebufferRenderbuffer(c,D.DEPTH_ATTACHMENT,D.RENDERBUFFER,w);D.clearDepth(1)},bind:function(m,v){J!==q.m&&(D.bindFramebuffer(c,g),q.m=J);d&&d.l();v&&D.viewport(0,0,x,y);m&&D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT)},ce:function(){J!==q.m&&(D.bindFramebuffer(c,g),q.m=J)},clear:function(){D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT)},ie:function(){D.clear(D.COLOR_BUFFER_BIT)},
je:function(){D.clear(D.DEPTH_BUFFER_BIT)},Rd:function(){D.viewport(0,0,x,y)},l:function(){J!==q.m&&(D.bindFramebuffer(c,g),q.m=J)},rtt:function(m){d=m;q.m!==J&&(D.bindFramebuffer(D.FRAMEBUFFER,g),q.m=J);m.l()},D:function(){D.bindFramebuffer(c,null);q.m=-1},resize:function(m,v){x=m;y=v;w&&(D.bindRenderbuffer(D.RENDERBUFFER,w),D.renderbufferStorage(D.RENDERBUFFER,D.DEPTH_COMPONENT16,x,y))},remove:function(){g===b||F||(D.bindFramebuffer(c,g),D.framebufferTexture2D(c,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,
null,0),w&&D.framebufferRenderbuffer(c,D.DEPTH_ATTACHMENT,D.RENDERBUFFER,null),D.bindFramebuffer(c,null),D.deleteFramebuffer(g),w&&D.deleteRenderbuffer(w));F=!0}};p.$b&&C.Ec();r.push(C);return C},D:function(){D.bindFramebuffer(c,null);q.m=-1},Yd:function(){D.bindFramebuffer(c,null);D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT);D.viewport(0,0,Ia.o(),Ia.K());q.m=-1},reset:function(){q.m=-2},J:function(){0!==q.m&&(D.bindFramebuffer(c,b),q.m=0)},clear:function(){D.viewport(0,0,Ia.o(),Ia.K());D.clear(D.COLOR_BUFFER_BIT)},
h:function(){u.D();r.forEach(function(p){p.remove()});D.deleteFramebuffer(b);u.reset();f=!1;r.splice(0);q.m=-2;q.Mb=1}};return u}(),Ia=function(){function b(){e="undefined"===typeof Ka?JEContext:Ka;f=!0}function c(m,v){for(var G=0;G<m.length;++G){var N=v.getExtension(m[G]);if(N)return N}return null}var e=null,f=!1,r=!1,q=null,u=null,p=!1,d=null,x=!1,y=null,g=!1,w=null,h=null,F={O:!0,P:!0,Ra:!0},J="undefined"===typeof window?{}:window,C={i:function(){if(f)return!0;b();var m=D;if(!r){q=C.Jb(m);if((p=
(J.GL_EXT_FLOAT=q)?!0:!1)||C.R())u=C.Kb(m),J.GL_EXT_FLOATLINEAR=u;r=!0}if(!g){if(d=C.ma(m))x=!0,J.GL_EXT_HALFFLOAT=d;if(x||C.R())y=C.Lb(m),J.GL_EXT_HALFFLOATLINEAR=y;g=!0}w=C.Hb(m);J.GL_EXT_COLORBUFFERFLOAT=w;h=C.Ib(m);J.GL_EXT_COLORBUFFERHALFFLOAT=h;Ja.i();R.i();if(!C.Vc())return!1;L.i();R.od();return!0},o:function(){f||b();return e.o()},K:function(){f||b();return e.K()},R:function(){f||b();return e.R()},Gb:function(m){C.Hb(m);C.Ib(m);C.Jb(m);C.Kb(m);C.ma(m);C.Lb(m)},Hb:c.bind(null,["EXT_color_buffer_float",
"WEBGL_color_buffer_float","OES_color_buffer_float"]),Ib:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Jb:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Kb:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),ma:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Lb:c.bind(null,["OES_texture_half_float_linear",
"MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Ta:function(m){var v=C.ma(m);return v&&v.HALF_FLOAT_OES?v.HALF_FLOAT_OES:m.HALF_FLOAT||m.FLOAT},ad:function(){return F},Cb:function(){return F.O},he:function(){return F.P},ge:function(){return F.Ra},Ga:function(m,v,G){function N(){m.bindTexture(m.TEXTURE_2D,null);m.bindFramebuffer(t,null);m.deleteTexture(M);m.deleteFramebuffer(H)}var t=m.FRAMEBUFFER,l=m.NEAREST,H=m.createFramebuffer();m.bindFramebuffer(t,H);var M=m.createTexture();
m.bindTexture(m.TEXTURE_2D,M);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,l);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,l);m.texImage2D(m.TEXTURE_2D,0,v,1,1,0,m.RGBA,G,null);m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,M,0);if(m.checkFramebufferStatus(m.READ_FRAMEBUFFER||m.FRAMEBUFFER)!==m.FRAMEBUFFER_COMPLETE)return N(),!1;Ba.mb(m);m.clearColor(0,0,0,0);m.viewport(0,0,1,1);m.disable(m.DEPTH_TEST);m.clear(m.COLOR_BUFFER_BIT);L.na(m);m.bindFramebuffer(t,null);
Ba.Ba(m);m.activeTexture(m.TEXTURE0);m.bindTexture(m.TEXTURE_2D,M);L.na(m);v=new Uint8Array(4);m.readPixels(0,0,1,1,m.RGBA,m.UNSIGNED_BYTE,v);N();return 3<Math.abs(v[0]-127)?!1:!0},Oa:function(m){var v={O:!1,P:!1};m.disable(m.BLEND);m.clearColor(0,0,0,0);m.clear(m.COLOR_BUFFER_BIT);m.RGBA32F&&C.Ga(m,m.RGBA32F,m.FLOAT)&&(v.O=!0);!v.O&&C.Ga(m,m.RGBA,m.FLOAT)&&(v.O=!0);var G=C.Ta(m);m.RGBA16F&&C.Ga(m,m.RGBA16F,G)&&(v.P=!0);!v.P&&C.Ga(m,m.RGBA,G)&&(v.P=!0);return v},Wc:function(){var m=Ja.instance({width:1});
m.wc();var v=R.instance({width:1,isFloat:!0,wa:3});m.l();v.l();D.flush();D.checkFramebufferStatus(Ja.ed())!==D.FRAMEBUFFER_COMPLETE?(R.Od(),F.Ra=!1):F.Ra=!0;m.remove();v.remove()},Vc:function(){var m=C.Oa(D);Object.assign(F,m);if(!F.O&&!F.P)return!1;C.Wc();return!0},h:function(){R.h();Ba.h();Ja.h();L.h();f=!1}};return C}(),Ca=function(){function b(v,G,N,t){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,t?h.NEAREST_MIPMAP_NEAREST:h.LINEAR);var l=null;if(null!==N)try{l=h.getError();if("FUCKING_BIG_ERROR"===
l)return!1;h.texImage2D(h.TEXTURE_2D,0,v,2,2,0,h.RGBA,G,N);l=h.getError();if(l!==h.NO_ERROR)return!1}catch(H){return!1}t&&h.generateMipmap(h.TEXTURE_2D);h.clear(h.COLOR_BUFFER_BIT);L.na(h);l=h.getError();if("FUCKING_BIG_ERROR"===l)return!1;h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,y);l=h.getError();l===h.INVALID_OPERATION&&"undefined"!==typeof h.PIXEL_PACK_BUFFER&&(h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,y),l=h.getError());if(l!==h.NO_ERROR)return!1;if(N=
0!==y[0])d.mc=G,d.Zb=v;return N}function c(v,G){return F.O&&b(v,h.FLOAT,new Float32Array(w),G)?(p=u.tb,!0):!1}function e(v,G,N){if(!F.P)return!1;var t=Ia.ma(h);if(t&&t.HALF_FLOAT_OES&&b(v,t.HALF_FLOAT_OES,new Uint16Array(w),G)||h.HALF_FLOAT&&b(v,h.HALF_FLOAT,new Uint16Array(w),G)||b(v,h.FLOAT,new Float32Array(w),G))return p=u.$,!0;h.bindTexture(h.TEXTURE_2D,N);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,null);h.bindFramebuffer(d.ka,m);R.Nb(h,N,1,1,new Float32Array(w),!1,!1);h.bindFramebuffer(d.ka,
null);h.bindTexture(h.TEXTURE_2D,N);return b(v,null,null,G)?(p=u.$,!0):!1}function f(v,G,N){x=!0;if(e(v,!0,N)||c(G,!0))return!0;x=!1;return e(v,!1,N)||c(G,!1)?!0:!1}function r(v){if(p===u.F){h=v||D;p=u.RGBA8;x=!0;Ia.Gb(h);F||(F=Ia.Oa(h));Ja.reset();m=h.createFramebuffer();d.ka=h.DRAW_FRAMEBUFFER||h.FRAMEBUFFER;h.bindFramebuffer(d.ka,null);h.clearColor(0,0,0,0);h.viewport(0,0,1,1);E.F();J=E.Ba(h);v=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,v);h.texParameteri(h.TEXTURE_2D,
h.TEXTURE_WRAP_S,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);C=v;var G=v=h.RGBA,N=h.RGBA16F,t=h.RGBA32F;t&&(v=t);N&&(G=N);if((N||t)&&f(G,v,C))return q(),!0;v=G=h.RGBA;if(f(G,v,C))return q(),!0;p=u.RGBA8;q();return!1}}function q(){h.deleteProgram(J.V);h.deleteTexture(C);C=J=null}var u={F:-1,tb:3,$:2,RGBA8:0},p=u.F,d={mc:null,Zb:null,ka:null},x=!0,y=new Uint8Array(4),g=[.8,1,.8,1],w=g.concat(g,g,g),h=null,F=null,J=null,
C=null,m=null;return{Oc:function(v){r(v);return x},Bb:function(v,G){p===u.F&&(typeof("undefined"!==G)&&(F=G),r(v));return p!==u.RGBA8},He:function(v){r(v);return p===u.tb},ud:function(v){r(v);return p===u.$},xe:function(v){r(v);return d.mc},dd:function(v){r(v);return d.Zb},h:function(){h=null;x=!0;p=u.F;F=null}}}(),Na={instance:function(b){var c=R.instance(b.alpha),e=R.instance(b.beta);return{Yc:function(){c.a(1);e.a(2)}}}},Pa={instance:function(b){var c=null,e=!1,f=!1,r=null,q=!1,u=!1,p=null,d="undefined"===
typeof b.preprocessing?!1:b.preprocessing,x="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(e=!0,a&&void 0!==a.Jc&&(b.mask=a.Jc+b.mask),c=R.instance({isFloat:!1,url:b.mask}));var y=!1;b.customInputShader&&(y="s44",E.vb({name:"_",id:y,b:b.customInputShader,c:["uSource"],precision:"lowp"}),E.I(y,[{type:"1i",name:"_",value:0}]));switch(d){case "sobel":p="s31";q=!0;break;case "meanNormalization":p="s32";q=!0;break;case "grayScale":p="s28";q=!1;break;case "grayScaleTilt":p=
"s29";u=!0;q=!1;break;case "rgbGrayTilt":p="s30";u=!0;q=!1;break;case "copy":p=y?y:"s0";break;case "inputLightRegulation":p=y?y:"s28";r=Oa.instance({Yb:x,lc:b.size,hc:b.nBlurPass,td:!1});f=!0;break;case "direct":case "none":p=!1;break;default:p="s3"}u&&E.I(p,[{name:"u26",type:"1f",value:b.tilt}]);e&&(p+="Mask");var g=R.instance({isFloat:!1,isPot:!1,width:b.size}),w={o:function(){return x},Ua:function(){return w.o()},ld:function(){return f?r.Sb():g},B:function(){Ja.J();p&&(E.set(p),q&&E.C("u27",1/
b.size),g.H(),e&&c.a(1),L.g(!1,!1),g.a(0),f&&r.process(g))},h:function(){g.remove();e&&c.remove()}};return w}},Xa={instance:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var c={input:null,ia:null,Za:null,M:null,xa:null,ib:null,jb:null},e=null,f=[],r=[],q=!1,u=null,p=!0,d=-1,x=b.isReorganize?b.isReorganize:!1,y=b.kernelsNumber?!0:!1,g=b.dynPelu?Na.instance(b.dynPelu):!1,w=g?!0:!1,h={isEnabled:!1};b.sd?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.za.Ua(),p=
!1):"full"===b.connectivityUp&&(b.sparsity=b.za.Ua());var F={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],J=b.sparsity*b.sparsity,C=!1,m=b.size,v="";if(b.maxPooling){switch(b.maxPooling.size){case 2:v="s33";break;case 4:v="s34"}C=!0;m/=b.maxPooling.size;c.ib=R.instance({isFloat:!0,isPot:!1,width:m})}var G=void 0!==b.zd&&b.zd?!0:!1,N=null,t=null,l=null;if(G){N="s45"+b.index.toString();E.Wb("s45",N,[((b.normalization.n-1)/2).toFixed(1)]);
E.I(N,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u31",value:b.normalization.k}]);var H={isFloat:!0,isPot:!0,width:b.size};t=R.instance(H);l=R.instance(H)}var M=-1,X=null;p&&(c.M=R.instance({isFloat:!0,isPot:!1,width:b.size}));c.ia=R.instance(b.bias);var fa={o:function(){return b.size},Ua:function(){return m},Qb:function(){return b.classesCount},Lc:function(I){e.a(I)},
Dd:function(){b.remap&&b.remap.isEnabled&&(h={isEnabled:!0,vd:R.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),va:b.remap.layers.map(function(I){return b.parent.hd(I)}),depth:b.remap.depth})},Pd:function(){switch(b.connectivityUp){case "direct":X=Sa.instance(b.connectivity);break;case "square":X=Ta.instance(b.connectivity);break;case "squareFast":X=Ua.instance(b.connectivity,b.activation);break;case "full":X=Va.instance(b.connectivity);
break;case "conv":d=b.kernelsNumber,X=Wa.instance(b.connectivity),x&&(c.xa=R.instance({width:m,isFloat:!0,isFlipY:!1,isPot:!1}))}if(X.Z){var I=b.size*b.sparsity;M=Math.log(I/b.size)/Math.log(2);c.input=R.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:I,cb:M});c.Za=R.instance({isFloat:!0,isPot:!0,width:b.size})}},B:function(I){e=I;X.Z?(c.input.H(),y&&c.ia.a(2),X.B(h),c.input.a(0),c.input.$c(M),c.Za.H(),y?E.set("s0"):(E.set("s27"),E.C("u25",J),c.ia.a(1)),c.input.Mc(M,0),L.g(!1,!1),E.set(F),G?t.l():
c.M.l(),c.Za.a(0),w&&g.Yc(),L.g(!1,!1)):(c.M.H(),c.ia.a(1),X.B());G&&(E.set(N),l.l(),t.a(0),L.g(!1,!1),E.set("s46"),E.C("u6",1),c.M.l(),l.a(1),L.g(!1,!1));if(p)return C?(c.ib.H(),c.M.a(0),E.set(v),E.ca("u7",1/b.size,1/b.size),L.g(!1,!1),I=c.ib):I=c.M,I.a(0),x&&(c.xa.l(),E.set("s21"),E.ca("u12",d,m/d),L.g(!1,!1),I=c.xa,c.xa.a(0)),I;I=c.M;b.disableNormalize||(E.set("gpuRawAvg"===q?"s8":"s7"),E.C("u4",1/b.size),c.jb.H(),c.M.a(0),L.g(!1,!1),I=c.jb);switch(q){case "cpuRGBA2Float":I.Pa(!1);I=fa.Ed(I);u(I);
break;case "cpuMeanFloat":I.Pa(!0);I=I.Fd();u(I);break;case "gpuRawAvg":case "gpuRaw":I.a(0);case "none":null!==u&&u(I)}return!1},Rc:function(I){I&&(q=I.kb||"none",u=I.hb||null);c.M=R.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});I="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var k=0,P=0,K=0;k<I;++k)f.push(P+(b.size-1-K)*b.size),r.push([-1,-1,-1,-1]),++P,P===b.size&&(P=0,++K);b.disableNormalize||(c.jb=R.instance({isFloat:!0,isPot:!0,width:b.size}))},
Ed:function(I){var k=I.lb();f.forEach(function(P,K){r[K][0]=k[0][P];r[K][1]=k[1][P];r[K][2]=k[2][P];r[K][3]=k[3][P]});return r},h:function(){for(var I in c){var k=c[I];k&&k.remove()}X&&(X.h(),X=null)}};b.za&&fa.Pd(b.za);return fa}};
function Ya(b){var c=null,e=null,f=null,r=0;this.i=function(q){this.Nd(q.va);f.Rc({kb:q.kb,hb:q.hb})};this.hd=function(q){return c[q]};this.Nd=function(q){var u=null;r=q.length;c=q.map(function(p,d){p=Object.assign({},p,{index:d,parent:this,za:u,sd:d===r-1});return u=d=0===d?Pa.instance(p):Xa.instance(p)});e=c[0];f=c[r-1];c.forEach(function(p,d){0!==d&&p.Dd()})};this.B=function(q,u){var p=u;c.forEach(function(d){p=d.B(p,q)});return p};this.fd=function(){return e.o()};this.md=function(){return f.o()};
this.Sb=function(){return f.ld()};this.Qb=function(){return f.Qb()};this.h=function(){c&&(c.forEach(function(q){q.h()}),f=e=c=null,r=0)};"undefined"!==typeof b&&this.i(b)}
var Sa={instance:function(b){var c=R.instance(b.weights);delete b.weights.data;return{Z:!0,qa:function(){return 1},h:function(){c.remove()},nd:function(){return c},B:function(){E.set("s26");c.a(1);L.g(!1,!1)}}}},Va={instance:function(b){var c=b.fromLayerSize,e=R.instance(b.weights);delete b.weights.data;return{Z:!0,qa:function(){return c},h:function(){e.remove()},B:function(f){if(f.isEnabled){E.set("s24");f.vd.a(3);var r,q=Math.min(f.va.length,f.depth);for(r=0;r<q;++r)f.va[r].Lc(4+r)}else E.set("s23");
E.C("u16",b.toLayerSize);e.a(1);L.g(!1,!1)}}}},Ta={instance:function(b){for(var c=b.fromLayerSize,e=b.toLayerSize,f=b.toSparsity,r=f*e,q=r/c,u=c/e,p=0,d=0,x=0,y=Array(f*e*f*e*4),g=Array(f*e*f*e*4),w=Array(c*c),h=0;h<w.length;++h)w[h]=0;h=Math.floor(f/2);for(var F=.5/e,J=.5/c,C=.5/r,m=0;m<e;++m)for(var v=Math.round(m*u),G=0;G<e;++G){var N=Math.round(G*u),t=m/e,l=G/e;t+=F;l+=F;for(var H=0;H<f;++H){var M=v+H-h;0>M&&(M+=c);M>=c&&(M-=c);for(var X=0;X<f;++X){var fa=p/r,I=d/r,k=N+X-h;0>k&&(k+=c);k>=c&&(k-=
c);var P=M/c,K=k/c;I=1-I-1/r;P+=J;K+=J;fa+=C;I+=C;var n=m*f+H,Z=G*f+X;Z=e*f-Z-1;n=Z*e*f+n;y[4*n]=fa;y[4*n+1]=I;y[4*n+2]=P;y[4*n+3]=K;K=w[k*c+M]++;n=K%q;P=M*q+n;k=k*q+(K-n)/q;k=c*q-1-k;k=k*c*q+P;g[4*k]=fa;g[4*k+1]=I;g[4*k+2]=t;g[4*k+3]=l;++p>=r&&(p=0,++d);++x}}}w=null;var ha=R.instance(b.weights);delete b.weights.data;var ba=R.instance({width:r,isFloat:!0,array:new Float32Array(g),isPot:!0});g=null;var U=R.instance({width:r,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;return{Z:!0,qa:function(){return q},
h:function(){ba.remove();U.remove();ha.remove()},B:function(){E.set("s22");ha.a(1);U.a(2);L.g(!1,!1)}}}},Wa={instance:function(b){var c=b.kernelsNumber,e=b.toSparsity,f=e*b.toLayerSize/b.fromLayerSize,r=R.instance(b.weights);delete b.weights.data;return{Z:!0,qa:function(){return f},Ce:function(){return e},nd:function(){return r},h:function(){r.remove()},B:function(){E.set("s25");E.C("u22",c);E.C("u23",e);E.C("u16",b.toLayerSize);E.C("u24",b.fromLayerSize);r.a(1);L.g(!1,!1)}}}},Ua={instance:function(b,
c){var e=b.fromLayerSize,f=b.toLayerSize,r=b.toSparsity,q=b.stride?b.stride:1,u=r*f/e,p=f<e,d=e/f,x=R.instance(b.weights);delete b.weights.data;var y="s47"+[e.toString(),f.toString(),r.toString(),q.toString(),c].join("_");E.Zc(y)||(b=sa(c),f=[{type:"1f",name:"u16",value:f},{type:"1f",name:"u30",value:q}],p&&f.push({type:"1f",name:"u24",value:e}),e=[(p?u:r).toFixed(1),b],p&&e.push(d.toFixed(1)),E.Wb(p?"s39":"s38",y,e),E.I(y,f.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",
name:"u13",value:3}])));return{Z:!1,qa:function(){return u},h:function(){x.remove()},B:function(){E.set(y);x.a(3);L.g(!1,!1)}}}},Oa={instance:function(b){var c=b.hc?b.hc:3,e=b.Yb?b.Yb:64,f=b.lc?b.lc:64,r=b.td?!0:!1;b={isFloat:!1,width:e,isPot:!1,isFlipY:!1};var q=R.instance(b),u=R.instance(b),p=R.instance(b),d=R.instance(b),x=R.instance({isFloat:!0,width:f,isPot:!1,isFlipY:!1}),y=1/e;return{process:function(g){E.set("s35");d.l();L.g(r,!1);E.set("s36");for(var w=0;w<c;++w)q.l(),E.ca("u7",y,0),L.g(r,
!1),p.l(),d.a(0),L.g(r,!1),u.l(),q.a(0),E.ca("u7",0,y),L.g(r,!1),d.l(),p.a(0),L.g(r,!1),w!==c-1&&u.a(0);E.set("s37");x.l();g.a(0);u.a(1);d.a(2);L.g(r,!1);x.a(0)},Sb:function(){return x}}}};function Za(b,c){b[c]=!0;b.setAttribute(c,"true")}function $a(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function ab(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}
function bb(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function cb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function eb(b){if(!b)return b;var c=!1;if(b.video){var e=function(f){var r={};"undefined"!==typeof f.min&&(r.min=f.min);"undefined"!==typeof f.max&&(r.max=f.max);"undefined"!==typeof f.ideal&&(r.ideal=f.ideal);return r};c={};"undefined"!==typeof b.video.width&&(c.width=e(b.video.width));"undefined"!==typeof b.video.height&&(c.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(c.facingMode=b.video.facingMode)}c={audio:b.audio,video:c};"undefined"!==typeof b.deviceId&&(c.deviceId=b.deviceId);
return c}function fb(b){var c=b.video.width;b.video.width=b.video.height;b.video.height=c;return b}
function gb(b){function c(g){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(w,h){return Math.abs(w-g)-Math.abs(h-g)})}function e(g){var w=eb(b);f.push(g(w))}var f=[];if(!b||!b.video)return f;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var r=c(b.video.width.ideal).slice(0,3),q=c(b.video.height.ideal).slice(0,3),u={},p=0;for(u.T=void 0;p<r.length;u={T:u.T},++p){u.T=r[p];var d={},x=0;for(d.S=void 0;x<q.length;d={S:d.S},++x)if(d.S=q[x],
u.T!==b.video.width.ideal||d.S!==b.video.height.ideal){var y=Math.max(u.T,d.S)/Math.min(u.T,d.S);y<4/3-.1||y>16/9+.1||e(function(g,w){return function(h){h.video.width.ideal=g.T;h.video.height.ideal=w.S;return h}}(u,d))}}}e(function(g){return fb(g)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(g){delete g.video.width.ideal;delete g.video.height.ideal;return g}),e(function(g){delete g.video.width;delete g.video.height;return g}));b.video.facingMode&&(e(function(g){delete g.video.facingMode;
return g}),b.video.width&&b.video.height&&e(function(g){fb(g);delete g.video.facingMode;return g}));f.push({audio:b.audio,video:!0});return f}function hb(b){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(f){c=window.innerHeight>window.innerWidth}if(c&&b&&b.video){c=b.video.width;var e=b.video.height;c&&e&&c.ideal&&e.ideal&&c.ideal>e.ideal&&(b.video.height=c,b.video.width=e)}}
function ib(b){b.volume=0;Za(b,"muted");if(bb()){if(1===b.volume){var c=function(){b.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){b.volume=0;Za(b,"muted")},5)}}
function jb(b,c,e,f){function r(u){q||(q=!0,e(u))}var q=!1;navigator.mediaDevices.getUserMedia(f).then(function(u){function p(){setTimeout(function(){if(b.currentTime){var d=b.videoWidth,x=b.videoHeight;if(0===d||0===x)r("VIDEO_NULLSIZE");else{d&&(b.style.width=d.toString()+"px");x&&(b.style.height=x.toString()+"px");d={Pc:null,Sd:null,wd:null};try{var y=u.getVideoTracks()[0];y&&(d.wd=y,d.Pc=y.getCapabilities(),d.Sd=y.getSettings())}catch(g){}bb()||$a()?b.parentNode&&null!==b.parentNode?(q||c(b,u,
d),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),ib(b),q||c(b,u,d),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";ib(b);setTimeout(function(){b.play()},100)},80)):q||c(b,u,d)}}else r("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=u:(b.src=window.URL.createObjectURL(u),b.videoStream=u);ib(b);b.addEventListener("loadeddata",function(){var d=b.play();ib(b);"undefined"===typeof d?
p():d.then(function(){p()}).catch(function(){r("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(u){r(u)})}
function kb(b,c,e){var f=cb()?document.createElement("video"):!1;if(f)if(cb()){if(e&&e.video){if($a()){var r=ab();(12>r[0]||12===r[0]&&2>r[1])&&hb(e)}e.video.width&&e.video.width.ideal&&(f.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(f.style.height=e.video.height.ideal+"px")}Za(f,"autoplay");Za(f,"playsinline");e&&e.audio?f.volume=0:Za(f,"muted");jb(f,b,function(){function q(p){if(0===p.length)c("INVALID_FALLBACKCONSTRAINTS");else{var d=p.shift();jb(f,b,function(){q(p)},
d)}}var u=gb(e);q(u)},e)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}
var lb=function(){var b={n:5,eb:1,ec:0,oa:[30,45],la:[2,200],k:.7,Zd:200,Cd:.05},c=-1,e=null,f=-1,r=-1,q=0,u=-1,p=-1,d=0,x=0,y=b.la[1],g={jd:function(){switch(c){case -1:return-1;case 0:return p+e.ec;case 1:return d}},bd:function(w){return Math.pow(Math.min(Math.max(u,0),e.n-1)/(e.n-1),w||1)},i:function(w){e=Object.assign({},b,w);u=p=e.eb;c=0},Vd:function(w){w=("undefined"===typeof w?Date.now():w)||0;var h=Math.min(Math.max(w-x,e.la[0]),e.la[1]);y=h;x=w;var F=-1===f?0:e.k;f=Math.min(Math.max(1E3/
h,5),120)*(1-F)+f*F;w-r>e.Zd&&5<++q&&(h=e.k,u=u*(1-h)+(f<e.oa[0]?p-1:f>e.oa[1]?p+1:p)*h,Math.abs(u-p)>1-e.Cd&&(h=Math.min(Math.max(Math.round(u),0),e.n-1),h!==p&&(u=p=h,f=(e.oa[1]-e.oa[0])/2)),r=w)},Pe:function(w){d=w;c=1},Ze:function(){c=0;g.reset()},reset:function(){y=b.la[1];r=f=-1;q=0},ue:function(){return y}};return g}(),mb=function(){var b={jc:4,ya:[1.5,1.5,2],W:[.1,.1,.1],tc:1,rb:-1,Va:-1,Ud:2,Bd:1,vc:!0},c=null,e=[],f=0,r=[.5,.5,1];return{i:function(q){c=Object.assign({},b,q);e.splice(0);
q=c.ya[0]*c.W[0];var u=c.ya[1]*c.W[1],p=1/(1+c.ya[2]*c.W[2]),d=c.tc*Math.min(c.rb,c.Va),x=d/c.rb;d/=c.Va;for(var y=0;y<c.jc;++y){var g=Math.pow(p,y),w=x*g,h=d*g;g=w*q;var F=h*u,J=w/2;h/=2;for(var C=1+(1-J-J)/g,m=1+(1-h-h)/F,v=0;v<m;++v)for(var G=h+v*F,N=0;N<C;++N)e.push([J+N*g,G,w*c.Bd])}c.vc&&e.sort(function(t,l){var H=t[0]-.5;t=t[1]-.5;var M=l[0]-.5;l=l[1]-.5;return H*H+t*t-(M*M+l*l)})},get:function(){var q=e.length;if(0===q)return r;f>=q&&(f=0);var u=e[Math.floor(f)];f=(f+1/c.Ud)%q;return u}}}(),
nb=function(){var b=0,c=null,e=null,f=null,r=null;return{i:function(q,u){b=q.length;c=u;e=q;f=new Float32Array(b);r=new Float32Array(b)},kd:function(){return r},Td:function(q,u,p){q.forEach(function(d,x){var y=Math.min(1,e[x]*p*(u+.33*(1-u)));d=y*d+(1-y)*f[x];f[x]=d;r[x]=c[x](d)})}}}(),V={X:[],Ka:!1,La:!1,Ja:!1,ub:!1,ga:!0,fa:!1,ready:!1,initialized:!1},ob={facingMode:"user",idealWidth:320,idealHeight:240,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},a={neuralNetworkPath:"jeelizFaceTransferNNC.json",
sb:"../../",Hc:0,width:512,height:512,Wd:55,uc:[.6,5.8],W:[.06,.08,.15],Ld:.6,Jd:2,Kd:[2,2,3],threshold:1.1,wb:[.03,1],ae:20,Ia:[2,7],A:{Ub:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},ic:11,fc:1,xd:1,xb:[.1,.01],Hd:[.4,-.7,-.4],Id:[.3,0,0],Xc:!1,Ic:.001,yb:[Math.PI/10,Math.PI/6],oc:[.1,.4],pc:[.009,.02],qc:[.02,.04],fb:5,Vb:.05,Gc:[.2,.2,.15,.15,.15,.15,.2,.2,.15,.15,.2],yd:[ma.bind(null,.05,.7),ma.bind(null,.05,.7),ma.bind(null,0,.4),ma.bind(null,0,.4),ma.bind(null,0,.6),ma.bind(null,0,.6),
na.bind(null,.05,.5),ma.bind(null,.1,.4),qa.bind(null,.7,.8,2),qa.bind(null,.7,.8,2),ma.bind(null,.15,.5)]};V.get_nMorphs=function(){return a.ic};var pb=null,qb=null,rb=null,sb=[];
function tb(){function b(){1===++n&&(nb.i(a.Gc,a.yd),c(),V.ready=!0,V.X.forEach(function(A){A()}),V.X.splice(0,V.X.length),e(),n=0)}function c(){t=da();l=new Uint8Array(m*m*4);V.get_morphTargetInfluences=function(){return t};V.get_morphTargetInfluencesStabilized=function(){return nb.kd()};V.set_morphUpdateCallback=function(A){H=A};V.get_rotation=function(){return X};V.get_positionScale=function(){var A=G.Ac.gd();A.Pa();A=A.lb();k[0]=1-A[1][0];k[1]=A[2][0];k[2]=A[3][0]*v[0];return k};V.get_rotationStabilized=
function(){return I};V.switch_sleep=function(A){ha!==Z.Ea||A?ha=A?Z.Ea:Z.Qa:e()};V.on_detect=function(A){A(ba.L);ba.gb.push(A)};V.is_detected=function(){return ba.L};V.set_animateDelay=function(A){h=A}}function e(){ha!==Z.Qa&&(ha=Z.Qa,f(),q())}function f(){F&&(window.clearTimeout(F),F=null);J&&(window.cancelAnimationFrame(J),J=null)}function r(){ha!==Z.Ea&&(F=setTimeout(q,h))}function q(){a:{if("VIDEO"===K.element.nodeName){var A=K.element.currentTime-wa;0>A&&(wa=K.element.currentTime);if(1E3*A<a.ae)break a;
wa+=A}K.da.refresh();A=la.Tb();A[0]===K.ja[0]&&A[1]===K.ja[1]||la.Dc();E.set("s49");Ja.J();G.$a.H();K.da.a(0);L.g(!1,!0)}A=lb.jd();for(var B=0;B<A;++B){var O=G,ca=C;E.set("s50");Ja.J();O.sa.H();O.$a.a(0);O.Fa.a(1);L.g(!1,!1);O.sa.a(0);ca.B(!1,O.sa)}A=lb.bd();P=3*(1-A)+1*A;lb.Vd();V.ga&&(Ja.Yd(),E.set("s5"),G.$a.a(0),L.g(!1,!1),D.enable(D.BLEND),D.blendFunc(D.SRC_ALPHA,D.ONE),N.a(0),L.g(!1,!1),D.disable(D.BLEND));D.flush();ha!==Z.Ea&&(J=window.requestAnimationFrame(r))}function u(){var A=p(a.A.Ub[0],
a.A.Ub[1]);ba.ta=a.Vb*A+(1-a.Vb)*ba.ta;.6<ba.ta&&!ba.L?(ba.gb.forEach(function(B){B(!0)}),ba.L=!0):.4>ba.ta&&ba.L&&(ba.gb.forEach(function(B){B(!1)}),ba.L=!1)}function p(A,B){A+=m*B;return(l[4*A]+l[4*A+1]+l[4*A+2]+l[4*A+3])/1020}function d(){t.forEach(function(A,B){if(ba.L){A=(a.fc+B)%m;var O=a.xd+Math.floor((a.fc+B)/m);O=m-1-O;A=p(A,O);t[B]=A}else t[B]=0})}function x(A){C=new Ya({va:A.layers,kb:"gpuRaw",hb:function(B){var O=G;O.Fa.xc(1);D.viewport(0,0,1,1);E.set("s51");E.C("u32",U.G);E.yc("u33",
mb.get());E.yc("u34",a.W);L.g(!1,!1);O.Ac.xc(1);E.set("s52");E.C("u32",U.G);O.Fa.a(0);L.g(!1,!1);R.Gd(B,l);d();if(!a.Xc&&ba.L)for(B=0;3>B;++B)O=p(B+a.A.rotation[0],a.A.rotation[1]),O=(2*O-1)*a.Hd[B],O+=a.Id[B],M[B]=O;u();B=Date.now();O=B-U.cc;var ca=p(a.A.quality[0],a.A.quality[1]);U.nc=na(a.oc[0],a.oc[1],ca);ca=p(a.A.position[0],a.A.position[1]);var Q=p(a.A.position[0]+1,a.A.position[1]),S=p(a.A.position[0]+2,a.A.position[1]);U.sc=1-na(a.qc[0],a.qc[1],Math.sqrt(ca*ca+Q*Q+S*S)/O);ca=U.Y[0]-M[0];Q=
U.Y[1]-M[1];S=U.Y[2]-M[2];O=Math.sqrt(ca*ca+Q*Q+S*S)/O;U.Y[0]=M[0];U.Y[1]=M[1];U.Y[2]=M[2];U.rc=1-na(a.pc[0],a.pc[1],O);U.G=U.nc*U.sc*U.rc;U.cc=B;U.bc[U.bb]=U.G;U.bb=(U.bb+1)%a.fb;for(B=0;B<a.fb;++B)U.G=Math.min(U.bc[B],U.G);nb.Td(t,U.G,P);H&&H(U.G,P);if(ba.L)for(B=a.xb[1]*U.G+a.xb[0]*(1-U.G),B*=P,O=0;3>O;++O)X[O]=B*M[O]+(1-B)*X[O],I[O]=X[O];else B=Date.now()*a.Ic,fa[0]=a.yb[0]*Math.sin(B),fa[1]=a.yb[1]*Math.cos(B),I[0]=fa[0],I[1]=fa[1],I[2]=fa[2];B=G;Ja.J();N.H();E.set("s53");B.Fa.a(0);L.g(!1,!1)}});
A=C.fd();A!==w&&(w=A,la.Xb(),G.sa.resize(w,w),la.zc());m=C.md();b()}var y=-1,g=-1,w=64,h=a.Hc,F=!1,J=!1,C=null,m=0,v=null,G={},N=null,t=null,l=null,H=null,M=[0,0,0],X=[0,0,0],fa=[0,0,0],I=[0,0,0],k=[0,0,0],P=1,K={element:null,da:null,ja:[-1,-1]},n=0,Z={Uc:-4,Ad:-3,Me:-2,Ea:-1,Qa:0},ha=Z.Ad,ba={ta:0,L:!1,gb:[]},U={G:1,sc:1,nc:1,rc:1,Y:[0,0,0],cc:Date.now(),bc:new Float32Array(a.fb),bb:0},wa=0,la={Xb:function(){y=a.width;g=a.height;mb.i({ya:a.Kd,jc:a.Jd,rb:y,Va:g,tc:a.Ld,W:a.W,vc:!0});v=[1,y/g]},zc:function(){E.I("s50",
[{type:"1i",name:"u1",value:0},{type:"1i",name:"u35",value:1},{type:"2f",name:"u36",value:v}]);E.I("s53",[{type:"1i",name:"u35",value:0},{type:"2f",name:"u36",value:v},{type:"3f",name:"u37",value:[0,.5,1]}]);E.I("s51",[{type:"1i",name:"u38",value:0},{type:"1i",name:"u35",value:1},{type:"1f",name:"u39",value:a.uc[0]},{type:"1f",name:"u40",value:a.uc[1]},{type:"1f",name:"u41",value:a.Wd},{type:"1f",name:"u42",value:a.threshold},{type:"1f",name:"u43",value:v[0]}]);E.I("s52",[{type:"1i",name:"u1",value:0},
{type:"1i",name:"u5",value:1},{type:"1f",name:"u44",value:a.wb[0]},{type:"1f",name:"u45",value:a.wb[1]}])},Sc:function(){E.Fc([{id:"s49",name:"_",ea:"attribute vec2 a0;uniform vec2 u46,u47;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u47+u46*a0;}",ha:["a0"],aa:[2],b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1","u46","u47"],precision:"lowp"},{id:"s50",name:"_",b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
ea:"attribute vec2 a0;uniform sampler2D u35;uniform vec2 u36;const vec2 f=vec2(.25,.5),h=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u35,f);vec2 b=a.gb,c=a.a*u36,d=a0*.5+e;vv0=b+(d-e)*c,gl_Position=vec4(a0,0.,1.);}",ha:["a0"],aa:[2],c:["u1","u35","u36"],precision:"lowp"},{id:"s51",name:"_",ea:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",b:"uniform sampler2D u38,u35;uniform vec3 u33,u34;uniform float u39,u40,u41,u42,u43,u32;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 c=texture2D(u38,vec2(.4375,.9375)),d=texture2D(u38,vec2(.5625,.9375));float f=dot(c-d,e);bool g=f>u42;vec4 a=texture2D(u35,vec2(.5,.5));g?a.r=2.:a.r>u41?a.r=0.:a.r>1.9&&(a.a>u40||a.a<u39)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u33,a.r=1.;else{float h=dot(e,texture2D(u38,vec2(.0625,.9375))),i=dot(e,texture2D(u38,vec2(.1875,.9375))),j=dot(e,texture2D(u38,vec2(.3125,.9375))),b;if(a.r>1.9)b=1.-u32;else b=1.,a.r=0.;float k=a.a*u43;a.gba+=vec3(h,i,j)*u34*b*k;}gl_FragColor=a;}",
c:"u38 u35 u33 u39 u40 u41 u42 u34 u43 u32".split(" ")},{id:"s53",name:"_",b:"uniform sampler2D u35;uniform vec3 u37;uniform vec2 u36;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 f=texture2D(u35,vec2(.25,.5));vec2 g=f.gb;float j=f.a;vec2 a=j*u36,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),h=step(d,vv0)*step(vv0,c);float l=h.x*h.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u37*max(b.x,b.y),1.);}",c:["u35","u36","u37"],precision:"lowp"},{id:"s52",name:"_",b:"uniform sampler2D u1,u5;uniform float u44,u45,u32;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);float c=(1.-u32)*(u45-u44)+u44;gl_FragColor=mix(b,a,c*f);}",
c:["u1","u5","u44","u45","u32"]}])},pd:function(A){var B=new Float32Array([0,a.borderWidth,a.fe,0]);A.$a=R.instance({isPot:!1,Le:!0,isFloat:!1,width:y,height:g});A.sa=R.instance({isPot:!0,isFloat:!1,width:w});B={width:1,height:1,isFloat:!0,isPot:!1,array:B};A.Fa=Ma.instance(B);A.Ac=Ma.instance(B)},Tc:function(){K.da=R.instance({u:K.element,isPot:!1,isFloat:!1,isFlipY:!0});N=R.instance({isPot:!1,isFloat:!1,width:y,height:g})},i:function(){la.Tc();la.pd(G);lb.i({eb:0,n:a.Ia[1]-a.Ia[0]+1,ec:a.Ia[0]});
rb?x(rb):aa(function(A){A=JSON.parse(A);x(A)})},h:function(){f();C&&(C.h(),C=null);ha=Z.Uc},Qc:function(A){V.Ka&&V.Ka();var B={video:{facingMode:{ideal:ob.facingMode},width:{min:ob.minWidth,max:ob.maxWidth,ideal:ob.idealWidth},height:{min:ob.minHeight,max:ob.maxHeight,ideal:ob.idealHeight}},audio:V.ub};ob.deviceId&&(constraints.deviceId=ob.deviceId);kb(function(O,ca){pb=ca;V.La&&V.La();A(O)},function(){window.Ha&&window.Ha("WEBCAM_UNAVAILABLE")},B)},dc:function(A,B){la.Sc();K.element=A;qb=K.element;
la.Dc();la.Xb();la.zc();la.i();B&&B()},Tb:function(){var A=[-1,-1],B=K.element;"VIDEO"===B.nodeName?(A[0]=B.videoWidth,A[1]=B.videoHeight):(A[0]=B.width,A[1]=B.height);return A},Dc:function(){var A=la.Tb();K.ja[0]=A[0];K.ja[1]=A[1];Ka.pa().width=A[0];Ka.pa().height=A[1];a.width=A[0];a.height=A[1];var B=[.5,.5],O=A[1]/A[0];A=Ka.K()/Ka.o();O>A?1>=O?B[0]*=O:B[1]/=O:(B[0]*=O,O=1/A,B[0]*=O,B[1]*=O);B[1]*=A;E.I("s49",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u46",value:B},{type:"2f",name:"u47",value:[.5,
.5]}])}};sb.push(la);return la}V.onLoad=function(b){V.ready?b():V.X.push(b)};V.set_audio=function(b){V.ub=b};V.switch_displayVideo=function(b){V.ga=b;V.fa&&(V.fa.style.display=V.ga?"block":"none")};V.onWebcamAsk=function(b){V.Ka=b};V.onContextLost=function(b){V.Ja=b};V.onWebcamGet=function(b){V.La=b};V.destroy=function(){qb&&qb.srcObject&&qb.srcObject.getTracks().forEach(function(b){b.stop()});sb.forEach(function(b){b.h()});sb.splice(0);Ka.h();V.switch_displayVideo(!1);V.initialized=!1;V.X.splice(0)};
V.set_size=function(b,c){a.width=b;a.height=c};V.get_size=function(){return{width:a.width,height:a.height}};V.get_videoStream=function(){return pb};V.get_video=function(){return qb};V.get_cv=function(){return Ka.pa()};V.set_color=function(b){E.I("s53",[{type:"3f",name:"u37",value:b}])};
V.init=function(b){var c=tb(),e=b.callbackReady?b.callbackReady:function(r){console.log("ERR:",r)},f=b.callbackReady?b.callbackReady.bind(!1):!1;if("undefined"===typeof b.canvasId)e("NO_CANVASID");else if(document.getElementById(b.canvasId))if(V.initialized)e("ALREADY_INITIALIZED");else{V.initialized=!0;window.Ha=e?function(r){e(r);window.Ha=!1}:!1;b.NNCpath&&(a.sb=b.NNCpath);"undefined"!==typeof b.NNC&&(rb="string"===typeof b.NNC?JSON.parse(b.NNC):b.NNC);f&&V.X.push(f);if(!Ka.i({Fb:b.canvasId,width:a.width,
height:a.height,debug:!1,ab:!1,kc:function(){V.Ja&&V.Ja()},premultipliedAlpha:!1}))return e("GL_INCOMPATIBLE"),!1;V.fa=Ka.pa();V.ga||(V.fa.style.display="none");L.i();Ja.i();E.i();R.i();D.depthFunc(D.LEQUAL);D.clearDepth(1);b.videoSettings&&b.videoSettings.videoElement?c.dc(b.videoSettings.videoElement,!1):(b.videoSettings&&Object.assign(ob,b.videoSettings),c.Qc(function(r){c.dc(r,!1)}));return!0}else e("INVALID_CANVASID")};window.JEEFACETRANSFERAPI=V;
;return JEEFACETRANSFERAPI||window.JEEFACETRANSFERAPI;})();